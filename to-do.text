Revise XY, Box, and maybe Num to use a template that generates each variant instead of the hierarchy.
